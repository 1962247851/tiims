(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d225049"],{e338:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pa-3"},[a("v-data-table",{staticClass:"elevation-2",attrs:{items:e.teachers,loading:e.loading,search:e.search,headers:e.headers,"sort-by":"id","show-expand":""},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-text-field",{staticClass:"me-2",attrs:{"append-icon":"mdi-magnify",label:"搜索",clearable:"","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-btn",{attrs:{color:"primary",disabled:e.loading,icon:""},on:{click:e.refresh}},[e.loading?a("v-progress-circular",{attrs:{color:"primary",size:"18",width:"2",indeterminate:""}}):a("v-icon",[e._v("mdi-refresh")])],1),a("v-btn",{attrs:{color:"primary",dark:"",icon:""},on:{click:function(t){e.dialog=!0}}},[a("v-icon",[e._v("mdi-plus")])],1)],1),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"姓名"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{attrs:{width:"300px","offset-y":"","open-on-hover":"","open-on-focus":"","nudge-top":"25"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"职称",readonly:""},model:{value:e.listDegreeString,callback:function(t){e.listDegreeString=t},expression:"listDegreeString"}},"v-text-field",s,!1),i))]}}])},[a("v-list",e._l(e.listDegrees,(function(t,i){return a("v-list-item",{key:i,on:{click:function(t){return e.clickDegreeItem(i)}}},[e._v(e._s(t)+" ")])})),1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{type:"number",label:"薪资/月（￥）"},model:{value:e.editedItem.salary,callback:function(t){e.$set(e.editedItem,"salary",t)},expression:"editedItem.salary"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{type:"number",label:"联系方式"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("取消")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("保存")])],1)],1)],1)]},proxy:!0},{key:"item.degree",fn:function(t){var i=t.item;return[a("v-chip",{attrs:{color:0===i.degree?"primary":"accent"}},[e._v(e._s(e.listDegrees[i.degree]))])]}},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-btn",{attrs:{icon:"",small:"",color:"warning"},on:{click:function(t){return e.editItem(i)}}},[a("v-icon",[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:"",small:"",color:"error"},on:{click:function(t){return e.deleteItem(i)}}},[a("v-icon",[e._v("mdi-delete")])],1)]}},{key:"expanded-item",fn:function(t){var i=t.headers,s=t.item;return[a("td",{staticClass:"ps-5 pe-5 pt-3 pb-3",attrs:{colspan:i.length}},[a("v-card",[a("v-toolbar",{attrs:{elevation:"0"}},[a("v-toolbar-title",[e._v(e._s(s.name)+"的班级信息")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.getClasses(s)}}},[a("v-icon",[e._v("mdi-refresh")])],1)],1),a("v-divider"),e._l(s.classList,(function(t){return a("v-list-group",{key:t.id,scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-title",[e._v(e._s(t.nature)+" - "+e._s(t.id))])]},proxy:!0}],null,!0)},[a("v-list-item",[a("v-text-field",{attrs:{disabled:"",label:"班级人数"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"tiClass.number"}})],1),a("v-list-item",[a("v-text-field",{attrs:{disabled:"",label:"补习科目门数"},model:{value:t.lessons,callback:function(a){e.$set(t,"lessons",a)},expression:"tiClass.lessons"}})],1),a("v-list-item",[a("v-text-field",{attrs:{disabled:"",label:"班级收费/人（￥）"},model:{value:t.cost,callback:function(a){e.$set(t,"cost",a)},expression:"tiClass.cost"}})],1)],1)}))],2)],1)]}}])})],1)},s=[],n=(a("c975"),a("a434"),{name:"Teacher",data:function(){return{teachers:[],loading:!0,search:"",dialog:!1,editedItem:{},editedIndex:-1,defaultItem:{},listDegreeString:"班主任",listDegrees:["班主任","助教","任课教师"],headers:[{text:"序号",value:"id"},{text:"姓名",value:"name"},{text:"职称",value:"degree"},{text:"薪资/月（￥）",value:"salary"},{text:"联系方式",value:"phone"},{text:"操作",value:"actions"},{text:"班级信息",value:"data-table-expand"}]}},computed:{formTitle:function(){return-1===this.editedIndex?"添加":"编辑"}},watch:{dialog:function(e){e||this.close()}},methods:{save:function(){-1===this.editedIndex?this.insert(this.editedItem):this.update(this.editedItem)},insert:function(e){var t=this;this.axios.put(this.API.URL.INSERT_TEACHER,e).then((function(e){var a=e.data;a.success&&(t.teachers.push(a.data),t.close())}))},update:function(e){var t=this;this.axios.post(this.API.URL.UPDATE_TEACHER,e).then((function(e){var a=e.data;a.success&&(Object.assign(t.teachers[t.editedIndex],a.data),t.close())}))},deleteItem:function(e){var t=this;if(confirm("确定删除教师：\n"+e.id)){var a=this.teachers.indexOf(e);this.axios.delete(this.API.URL.DELETE_TEACHER+e.id).then((function(e){var i=e.data;i.success&&(alert("删除成功"),t.teachers.splice(a,1))}))}},editItem:function(e){this.editedIndex=this.teachers.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},refresh:function(){this.getTeachers()},getTeachers:function(){this.loading=!0;var e=this;this.axios.get(this.API.URL.QUERY_ALL_TEACHERS).then((function(t){e.loading=!1;var a=t.data;a.success&&(e.teachers=a.data)}),(function(){e.loading=!1}))},clickDegreeItem:function(e){this.listDegreeString=this.listDegrees[e],this.editedItem.degree=e},getClasses:function(e){this.axios.get(this.API.URL.QUERY_CLASSES_BY_TEACHER_ID+e.id).then((function(t){var a=t.data;a.success&&(e.classList=a.data)}))}},created:function(){this.getTeachers()}}),r=n,l=a("2877"),c=a("6544"),o=a.n(c),d=a("8336"),u=a("b0af"),v=a("99d9"),m=a("cc20"),h=a("62ad"),f=a("a523"),p=a("8fea"),g=a("169a"),b=a("ce7e"),x=a("132d"),I=a("8860"),_=a("56b0"),k=a("da13"),C=a("5d23"),y=a("e449"),T=a("490a"),V=a("0fd9"),E=a("2fa4"),D=a("8654"),L=a("71d9"),w=a("2a7f"),A=Object(l["a"])(r,i,s,!1,null,"1649f54a",null);t["default"]=A.exports;o()(A,{VBtn:d["a"],VCard:u["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VChip:m["a"],VCol:h["a"],VContainer:f["a"],VDataTable:p["a"],VDialog:g["a"],VDivider:b["a"],VIcon:x["a"],VList:I["a"],VListGroup:_["a"],VListItem:k["a"],VListItemTitle:C["b"],VMenu:y["a"],VProgressCircular:T["a"],VRow:V["a"],VSpacer:E["a"],VTextField:D["a"],VToolbar:L["a"],VToolbarTitle:w["a"]})}}]);
//# sourceMappingURL=chunk-2d225049.38cdb51b.js.map